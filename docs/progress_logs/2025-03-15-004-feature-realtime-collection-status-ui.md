# 기능 추가: 실시간 수집 현황 UI 개선

## 작업 일자
2025-03-15

## 문제 상황
- 현재 수집기 UI에서는 수집 중인 항목의 정보와 진행률을 실시간으로 확인할 수 없음
- API 수집 시 1,000개 항목을 빠르게 수집하지만 진행 상황을 시각적으로 확인할 방법이 없음
- 사용자는 수집이 완료될 때까지 어느 정도 진행되었는지 알 수 없음

## 구현 내용

### 백엔드 개선

1. **CollectionTask 클래스에 필드 추가**:
   - `current_count` - 현재까지 수집된 항목 수
   - `latest_collected_item` - 가장 최근에 수집된 항목 정보

2. **진행 상황 업데이트 메서드 추가**:
   - `_update_metadata_progress()`: 메타데이터 수집 진행 상황 업데이트
   - `_update_comment_progress()`: 댓글 수집 진행 상황 업데이트

3. **상세 상태 조회 API 엔드포인트 추가**:
   - `/collectors/detailed-status/{request_id}`: 상세 수집 상태 (최신 수집 항목 정보 포함)

### UI 개선

1. **실시간 수집 현황 섹션 추가**:
   - 진행률 표시 (프로그레스 바)
   - 수집된 항목 수 및 진행률 미터
   - 최근 수집 항목 정보 표시 영역

2. **메타데이터 수집 시 표시 정보**:
   - 기사 제목, 출처, URL
   - 현재 진행률과 수집 개수

3. **댓글 수집 시 표시 정보**:
   - 기사 진행 정보 (n번째 기사 / 전체 기사)
   - 댓글 진행 정보 (n번째 댓글 / 전체 댓글)
   - 댓글 내용과 작성자

4. **자동 새로고침 기능**:
   - 1초마다 상태 자동 업데이트
   - 수동 새로고침 버튼도 제공

## 상세 구현 방법

1. **백엔드 수정 사항**:
   - `collector_service.py`에 실시간 진행 상황 업데이트 메서드 추가
   - `collector_router.py`에 상세 상태 조회 API 엔드포인트 추가

2. **프론트엔드 수정 사항**:
   - `collection_service.py`에 상세 상태 조회 함수 추가
   - `1_Collection.py`에 실시간 진행 상황 표시 UI 요소 추가
   - 수집 요청 응답에서 요청 ID를 세션에 저장하는 로직 추가

## 효과

- 사용자는 수집 진행 상황을 실시간으로 확인 가능
- 정확한 진행률과 현재 수집 중인 항목 정보를 시각적으로 확인 가능
- 수집 요청 후 즉시 진행 상황 표시 시작
- 메타데이터와 댓글 수집 모두 실시간 현황 확인 가능

## 향후 개선 방향

1. **WebSocket 연결 고려**:
   - 현재는 주기적 폴링 방식으로 상태 확인
   - 향후 WebSocket 연결로 더 효율적인 실시간 업데이트 구현 가능

2. **상세 통계 확장**:
   - 수집 속도, 예상 완료 시간 등 추가 정보 제공
   - 수집 항목 유형별 통계 정보 표시
